
namespace UtilityTest;
internal static partial class Program {
    static void Test__Integer() {
        CONOUT($"\n[Utility.INT]");

        //######################################################################################################################################################
        //######################################################################################################################################################
        TEST("abs()", true
            && abs(-2) == 2
            && abs(-1) == 1
            && abs( 0) == 0
            && abs( 1) == 1
            && abs( 2) == 2
        );

        //======================================================================================================================================================
        TEST("clamp()", true
            &&    clamp(-8, -5, -3) == -5    &&    clamp(-8, -2,  3) == -2    &&    clamp(-8,  1,  5) ==  1
            &&    clamp(-7, -5, -3) == -5    &&    clamp(-7, -2,  3) == -2    &&    clamp(-7,  1,  5) ==  1
            &&    clamp(-6, -5, -3) == -5    &&    clamp(-6, -2,  3) == -2    &&    clamp(-6,  1,  5) ==  1
            &&    clamp(-5, -5, -3) == -5    &&    clamp(-5, -2,  3) == -2    &&    clamp(-5,  1,  5) ==  1
            &&    clamp(-4, -5, -3) == -4    &&    clamp(-4, -2,  3) == -2    &&    clamp(-4,  1,  5) ==  1
            &&    clamp(-3, -5, -3) == -3    &&    clamp(-3, -2,  3) == -2    &&    clamp(-3,  1,  5) ==  1
            &&    clamp(-2, -5, -3) == -3    &&    clamp(-2, -2,  3) == -2    &&    clamp(-2,  1,  5) ==  1
            &&    clamp(-1, -5, -3) == -3    &&    clamp(-1, -2,  3) == -1    &&    clamp(-1,  1,  5) ==  1
            &&    clamp( 0, -5, -3) == -3    &&    clamp( 0, -2,  3) ==  0    &&    clamp( 0,  1,  5) ==  1
            &&    clamp( 1, -5, -3) == -3    &&    clamp( 1, -2,  3) ==  1    &&    clamp( 1,  1,  5) ==  1
            &&    clamp( 2, -5, -3) == -3    &&    clamp( 2, -2,  3) ==  2    &&    clamp( 2,  1,  5) ==  2
            &&    clamp( 3, -5, -3) == -3    &&    clamp( 3, -2,  3) ==  3    &&    clamp( 3,  1,  5) ==  3
            &&    clamp( 4, -5, -3) == -3    &&    clamp( 4, -2,  3) ==  3    &&    clamp( 4,  1,  5) ==  4
            &&    clamp( 5, -5, -3) == -3    &&    clamp( 5, -2,  3) ==  3    &&    clamp( 5,  1,  5) ==  5
            &&    clamp( 6, -5, -3) == -3    &&    clamp( 6, -2,  3) ==  3    &&    clamp( 6,  1,  5) ==  5
            &&    clamp( 7, -5, -3) == -3    &&    clamp( 7, -2,  3) ==  3    &&    clamp( 7,  1,  5) ==  5
            &&    clamp( 8, -5, -3) == -3    &&    clamp( 8, -2,  3) ==  3    &&    clamp( 8,  1,  5) ==  5
        );

        TEST("wrap(int, Lower, Upper)", true
            &&    wrap(-8, 0, 4) == 0    &&    wrap(-8, -2, 2) ==  0    &&    wrap(-8, -6, -2) == -4
            &&    wrap(-7, 0, 4) == 1    &&    wrap(-7, -2, 2) ==  1    &&    wrap(-7, -6, -2) == -3
            &&    wrap(-6, 0, 4) == 2    &&    wrap(-6, -2, 2) == -2    &&    wrap(-6, -6, -2) == -6
            &&    wrap(-5, 0, 4) == 3    &&    wrap(-5, -2, 2) == -1    &&    wrap(-5, -6, -2) == -5
            &&    wrap(-4, 0, 4) == 0    &&    wrap(-4, -2, 2) ==  0    &&    wrap(-4, -6, -2) == -4
            &&    wrap(-3, 0, 4) == 1    &&    wrap(-3, -2, 2) ==  1    &&    wrap(-3, -6, -2) == -3
            &&    wrap(-2, 0, 4) == 2    &&    wrap(-2, -2, 2) == -2    &&    wrap(-2, -6, -2) == -6
            &&    wrap(-1, 0, 4) == 3    &&    wrap(-1, -2, 2) == -1    &&    wrap(-1, -6, -2) == -5
            &&    wrap( 0, 0, 4) == 0    &&    wrap( 0, -2, 2) ==  0    &&    wrap( 0, -6, -2) == -4
            &&    wrap( 1, 0, 4) == 1    &&    wrap( 1, -2, 2) ==  1    &&    wrap( 1, -6, -2) == -3
            &&    wrap( 2, 0, 4) == 2    &&    wrap( 2, -2, 2) == -2    &&    wrap( 2, -6, -2) == -6
            &&    wrap( 3, 0, 4) == 3    &&    wrap( 3, -2, 2) == -1    &&    wrap( 3, -6, -2) == -5
            &&    wrap( 4, 0, 4) == 0    &&    wrap( 4, -2, 2) ==  0    &&    wrap( 4, -6, -2) == -4
            &&    wrap( 5, 0, 4) == 1    &&    wrap( 5, -2, 2) ==  1    &&    wrap( 5, -6, -2) == -3
            &&    wrap( 6, 0, 4) == 2    &&    wrap( 6, -2, 2) == -2    &&    wrap( 6, -6, -2) == -6
            &&    wrap( 7, 0, 4) == 3    &&    wrap( 7, -2, 2) == -1    &&    wrap( 7, -6, -2) == -5
            &&    wrap( 8, 0, 4) == 0    &&    wrap( 8, -2, 2) ==  0    &&    wrap( 8, -6, -2) == -4
        );

        TEST("wrap(int, Upper)", true
            &&    wrap(-8, 4) == 0    &&    wrap(-8, 5) == 2
            &&    wrap(-7, 4) == 1    &&    wrap(-7, 5) == 3
            &&    wrap(-6, 4) == 2    &&    wrap(-6, 5) == 4
            &&    wrap(-5, 4) == 3    &&    wrap(-5, 5) == 0
            &&    wrap(-4, 4) == 0    &&    wrap(-4, 5) == 1
            &&    wrap(-3, 4) == 1    &&    wrap(-3, 5) == 2
            &&    wrap(-2, 4) == 2    &&    wrap(-2, 5) == 3
            &&    wrap(-1, 4) == 3    &&    wrap(-1, 5) == 4
            &&    wrap( 0, 4) == 0    &&    wrap( 0, 5) == 0
            &&    wrap( 1, 4) == 1    &&    wrap( 1, 5) == 1
            &&    wrap( 2, 4) == 2    &&    wrap( 2, 5) == 2
            &&    wrap( 3, 4) == 3    &&    wrap( 3, 5) == 3
            &&    wrap( 4, 4) == 0    &&    wrap( 4, 5) == 4
            &&    wrap( 5, 4) == 1    &&    wrap( 5, 5) == 0
            &&    wrap( 6, 4) == 2    &&    wrap( 6, 5) == 1
            &&    wrap( 7, 4) == 3    &&    wrap( 7, 5) == 2
            &&    wrap( 8, 4) == 0    &&    wrap( 8, 5) == 3
        );

        //------------------------------------------------------------------------------------------------------------------------------------------------------
        TEST("prev(i, Upper)  next(i, Upper)", true
            &&  prev(0,10) == 9  &&  next(0,10) == 1
            &&  prev(1,10) == 0  &&  next(1,10) == 2
            &&  prev(2,10) == 1  &&  next(2,10) == 3
            &&  prev(3,10) == 2  &&  next(3,10) == 4
            &&  prev(4,10) == 3  &&  next(4,10) == 5
            &&  prev(5,10) == 4  &&  next(5,10) == 6
            &&  prev(6,10) == 5  &&  next(6,10) == 7
            &&  prev(7,10) == 6  &&  next(7,10) == 8
            &&  prev(8,10) == 7  &&  next(8,10) == 9
            &&  prev(9,10) == 8  &&  next(9,10) == 0
        );

        TEST("prev(i, Step, Upper)  next(i, Step, Upper)", true
            &&  prev(0,1,10) == 9  &&  prev(0,2,10) == 8  &&  prev(0,3,10) == 7
            &&  prev(1,1,10) == 0  &&  prev(1,2,10) == 9  &&  prev(1,3,10) == 8
            &&  prev(2,1,10) == 1  &&  prev(2,2,10) == 0  &&  prev(2,3,10) == 9
            &&  prev(3,1,10) == 2  &&  prev(3,2,10) == 1  &&  prev(3,3,10) == 0
            &&  prev(4,1,10) == 3  &&  prev(4,2,10) == 2  &&  prev(4,3,10) == 1
            &&  prev(5,1,10) == 4  &&  prev(5,2,10) == 3  &&  prev(5,3,10) == 2
            &&  prev(6,1,10) == 5  &&  prev(6,2,10) == 4  &&  prev(6,3,10) == 3
            &&  prev(7,1,10) == 6  &&  prev(7,2,10) == 5  &&  prev(7,3,10) == 4
            &&  prev(8,1,10) == 7  &&  prev(8,2,10) == 6  &&  prev(8,3,10) == 5
            &&  prev(9,1,10) == 8  &&  prev(9,2,10) == 7  &&  prev(9,3,10) == 6

            &&  next(0,1,10) == 1  &&  next(0,2,10) == 2  &&  next(0,3,10) == 3
            &&  next(1,1,10) == 2  &&  next(1,2,10) == 3  &&  next(1,3,10) == 4
            &&  next(2,1,10) == 3  &&  next(2,2,10) == 4  &&  next(2,3,10) == 5
            &&  next(3,1,10) == 4  &&  next(3,2,10) == 5  &&  next(3,3,10) == 6
            &&  next(4,1,10) == 5  &&  next(4,2,10) == 6  &&  next(4,3,10) == 7
            &&  next(5,1,10) == 6  &&  next(5,2,10) == 7  &&  next(5,3,10) == 8
            &&  next(6,1,10) == 7  &&  next(6,2,10) == 8  &&  next(6,3,10) == 9
            &&  next(7,1,10) == 8  &&  next(7,2,10) == 9  &&  next(7,3,10) == 0
            &&  next(8,1,10) == 9  &&  next(8,2,10) == 0  &&  next(8,3,10) == 1
            &&  next(9,1,10) == 0  &&  next(9,2,10) == 1  &&  next(9,3,10) == 2
        );

        {
            int[] A = [10,11,12,13,14];
            int i = 0;
            TEST("Array.prev(i)  Array.next(i)", true
                &&  A.prev(i) == 14  &&  A.next(i++) == 11
                &&  A.prev(i) == 10  &&  A.next(i++) == 12
                &&  A.prev(i) == 11  &&  A.next(i++) == 13
                &&  A.prev(i) == 12  &&  A.next(i++) == 14
                &&  A.prev(i) == 13  &&  A.next(i++) == 10
            );
            i = 0;
            TEST("Array.prev(i, Step)  Array.next(i, Step)", true
                &&  A.prev(i,2) == 13  &&  A.next(i++,2) == 12
                &&  A.prev(i,2) == 14  &&  A.next(i++,2) == 13
                &&  A.prev(i,2) == 10  &&  A.next(i++,2) == 14
                &&  A.prev(i,2) == 11  &&  A.next(i++,2) == 10
                &&  A.prev(i,2) == 12  &&  A.next(i++,2) == 11
            );
        }

        //======================================================================================================================================================
        TEST("min()", true
            && min(-2, 2) == -2
            && min(-1, 1) == -1
            && min(-1,-1) == -1
            && min( 0, 0) ==  0
            && min( 1, 1) ==  1
            && min( 1,-1) == -1
            && min( 2,-2) == -2

            && min(1,2,3) == 1
            && min(3,1,2) == 1
            && min(2,3,1) == 1

            && min(1,2,3,4) == 1
            && min(4,1,2,3) == 1
            && min(3,4,1,2) == 1
            && min(2,3,4,1) == 1
        );

        TEST("max()", true
            && max(-2, 2) ==  2
            && max(-1, 1) ==  1
            && max(-1,-1) == -1
            && max( 0, 0) ==  0
            && max( 1, 1) ==  1
            && max( 1,-1) ==  1
            && max( 2,-2) ==  2

            && max(1,2,3) == 3
            && max(3,1,2) == 3
            && max(2,3,1) == 3

            && max(1,2,3,4) == 4
            && max(4,1,2,3) == 4
            && max(3,4,1,2) == 4
            && max(2,3,4,1) == 4
        );

        //======================================================================================================================================================
        TEST("trunk()", true
            && trunk((int)          2147483647, -2) == (int)            47483647
            && trunk((int)          2147483647,  2) == (int)          21474836
            && trunk((long)9223372036854775807, -2) == (long)  23372036854775807
            && trunk((long)9223372036854775807,  2) == (long)92233720368547758
        );

        //######################################################################################################################################################
        //######################################################################################################################################################
        {
            uint A = 0b_10101010_10101010_10101010_10101010u;
            uint B = 0b_11001100_11001100_11001100_11001100u;
            uint C = 0b_10001000_10001000_10001000_10001000u;
            uint D = 0b_11111111_00000000_11111111_00000000u;

            TEST("BitFlip()", true
                && BitFlip(BitFlip(A)) == A
                && BitFlip(BitFlip(B)) == B
                && BitFlip(BitFlip(C)) == C
                && BitFlip(BitFlip(D)) == D
            );

            bvec4 vA = A;
            bvec4 vB = B;
            bvec4 vC = C;
            bvec4 vD = D;

            TEST("ByteFlip()", true
                && ByteFlip(ByteFlip(A)) == A
                && ByteFlip(ByteFlip(B)) == B
                && ByteFlip(ByteFlip(C)) == C
                && ByteFlip(ByteFlip(D)) == D

                && ByteFlip(ByteFlip(vA)) == vA
                && ByteFlip(ByteFlip(vB)) == vB
                && ByteFlip(ByteFlip(vC)) == vC
                && ByteFlip(ByteFlip(vD)) == vD
            );
        }

        //######################################################################################################################################################
        //######################################################################################################################################################
    }
}
